from flask import Flask, render_template, request
import base64
import numpy as np
from PIL import Image
import io
import Aruco
import cv2 as cv
import CutUp
import PostProcess


# from base64 to numpy
def get_numpy(base64_string):
    split = base64_string.split(',', 1)
    byte_file = bytes(split[1], 'utf-8')
    file = base64.decodebytes(byte_file)

    # finding the dimensions
    im = Image.open(io.BytesIO(file))
    arr = np.array(im)[:, :, 0]
    return arr


app = Flask(__name__)


@app.route('/')
def output():
    # serve index template
    return render_template('index.html')


@app.route('/receiver', methods=['POST'])
def worker():
    # read json + reply
    data = request.get_json(force=True)

    def get_result(the_data):
        try:
            numpy = get_numpy(the_data)
        except IndexError:
            return 'Image file is too small. Please upload at least 1100 x 1700 px.', 'error', ''

        try:
            align = Aruco.aruco_align(numpy)
        except IndexError:  # occurs when the corners are not found
            return 'We couldn\'t detect the corners of your scoresheet. Make sure the black boxes are clearly ' \
                   'visible!.', 'error', ''
        try:
            final = cv.resize(align, (1100, 1700))
            # parameters and outputs of box_extraction still need to be changed
            the_moves = [

                # 1

                ['e', 'c', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['4', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],

                ['e', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['5', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],  # 2

                ['N', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['c', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['3', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],

                ['N', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['f', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['6', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],  # 3

                ['N', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['f', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['3', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],

                ['N', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['c', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['6', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],  # 4

                ['d', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['4', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],

                ['e', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['x', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['d', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['4', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],  # 5

                ['N', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['x', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['d', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['4', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],

                ['B', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['b', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['4', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],  # 6

                ['B', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['g', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['5', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],

                ['h', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['6', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],  # 7

                ['B', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['h', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['4', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],

                ['g', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['5', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],  # 8

                ['B', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['g', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['3', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],

                ['d', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['6', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],  # 9

                ['R', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['c', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['1', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],

                ['N', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['x', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['d', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['4', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],  # 10

                ['Q', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['x', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['d', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['4', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],

                ['B', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['f', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['5', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],  # 11

                ['h', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['4', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],

                ['K', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['d', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['7', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],  # 12

                ['R', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['d', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['1', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],

                ['N', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['e', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['4', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],  # 13

                ['Q', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['e', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['5', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],

                ['B', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['x', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['c', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['3', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['+', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],  # 14

                ['b', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['x', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['c', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['3', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],

                ['N', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['x', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['g', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['3', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],  # 15

                ['f', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['x', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['g', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['3', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],

                ['B', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['g', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['6', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],  # 16

                ['h', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['x', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['g', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['5', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],

                ['Q', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['x', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['g', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['5', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],  # 17

                ['Q', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['f', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['4', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],

                ['R', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['a', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['e', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['8', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],  # 18

                ['B', 'R', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['d', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['5', '6', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],

                ['Q', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['x', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['f', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['4', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],  # 19

                ['g', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['x', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['f', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['4', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],

                ['b', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['6', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],  # 20

                ['K', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['f', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['2', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],

                ['h', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['5', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],  # 21

                ['e', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['3', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],

                ['h', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['4', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],  # 22

                ['B', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['e', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['2', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],

                ['B', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['e', 'a', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['4', '7', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],  # 23

                ['R', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['g', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['5', '6', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],

                ['R', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['e', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['g', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['8', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],  # 24

                ['B', 'R', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['g', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['4', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['+', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],

                ['K', 'B', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['c', 'e', 'a', 'x', 'x', 'x', 'x', 'x'],
                ['6', '5', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],  # 25

                ['R', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['x', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['g', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['8', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],

                ['R', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['x', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['g', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['8', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],  # 26

                ['R', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['x', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['h', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['4', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],

                ['K', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['c', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['5', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],  # 27

                ['B', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['f', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['3', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],

                ['B', 'R', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['x', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['f', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['3', '6', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],  # 28

                ['K', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['x', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['f', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['3', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],

                ['K', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['x', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['c', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['4', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],  # 29

                ['R', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['h', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['7', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],

                ['R', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['f', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['8', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],  # 30

                ['g', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['4', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],

                ['K', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['x', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['c', '0', 'o', 'x', 'x', 'x', 'x', 'x'],
                ['3', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],  # 31

                ['K', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['e', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['4', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],

                ['c', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['5', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],  # 32

                ['g', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['5', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],

                ['c', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['4', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],  # 33

                ['K', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['d', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['5', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],

                ['K', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['b', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['4', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],  # 34

                ['e', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['4', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],

                ['c', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['3', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],  # 35

                ['R', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['h', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['2', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],

                ['R', 'B', 'K', 'x', 'x', 'x', 'x', 'x'],
                ['c', 'e', 'a', 'g', 'x', 'x', 'x', 'x'],
                ['8', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],  # 36

                ['R', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['c', 'a', 'e', 'x', 'x', 'x', 'x', 'x'],
                ['2', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],

                ['b', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['5', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],  # 37

                ['f', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['5', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],

                ['a', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['5', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],  # 38

                ['K', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['x', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['d', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['6', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],

                ['K', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['c', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['4', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],  # 39

                ['e', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['5', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],

                ['b', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['4', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],  # 40

                ['K', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['d', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['7', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],

                ['R', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['a', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['8', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],  # 41

                ['e', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['6', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],

                ['f', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['x', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['e', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['6', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],  # 42

                ['f', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['6', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],

                ['a', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['4', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],  # 43

                ['g', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['6', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],

                ['b', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['3', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],  # 44

                ['a', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['x', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['b', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['3', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['+', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],

                ['a', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['x', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['b', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['3', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],  # 45

                ['R', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['x', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['c', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['3', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['+', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],

                ['K', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['x', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['c', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['3', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],  # 46

                ['f', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['7', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],

                ['b', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['2', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],  # 47

                ['g', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['7', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],

                ['b', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['1', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['=', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['Q', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],  # 48

                ['f', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['8', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['=', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['Q', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],

                ['Q', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['b', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['7', '4', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['+', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],  # 49

                ['K', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['x', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['e', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['6', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],

                ['R', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['a', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['6', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['+', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],  # 50

                ['K', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['e', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['5', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],

                ['Q', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['b', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['5', '6', '3', '8', 'x', 'x', 'x', 'x'],
                ['+', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],  # 51

                ['K', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['f', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['4', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],

                ['R', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['a', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['4', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['+', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],  # 52

                ['K', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['g', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['3', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],

                ['Q', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['d', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['3', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['+', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],  # 53

                ['Q', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['f', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['3', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],

                ['R', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['a', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['8', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],  # 54

                ['g', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['8', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['=', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['Q', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],

                ['R', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['x', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['g', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['8', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['+', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],  # 55

                ['K', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['h', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['2', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],

                ['R', 'B', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['h', 'b', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['8', '3', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['+', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],  # 56

                ['K', 'B', 'Q', 'x', 'x', 'x', 'x', 'x'],
                ['g', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['1', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],

                ['R', 'B', 'K', 'x', 'x', 'x', 'x', 'x'],
                ['g', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['8', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['+', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],  # 57

                ['K', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['h', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['2', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],

                ['K', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['c', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['2', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],  # 58

                ['Q', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['c', 'a', 'e', 'x', 'x', 'x', 'x', 'x'],
                ['6', '5', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['+', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],

                ['K', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['d', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['1', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],  # 59

                ['Q', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['f', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['3', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['+', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_'],

                ['Q', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['c', 'e', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['2', 'x', 'x', 'x', 'x', 'x', 'x', 'x'],
                ['+', '#', 'x', 'x', 'x', 'x', 'x', 'x'],

                ['_']
            ]

            the_confs = [
                # 1

                [0.5, 0.5, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],  # 2

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],  # 3

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],  # 4

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],  # 5

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],  # 6

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],  # 7

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],  # 8

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],  # 9

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],  # 10

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],  # 11

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],  # 12

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],  # 13

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],  # 14

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],  # 15

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],  # 16

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],  # 17

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],  # 18

                [0.5, 0.5, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [0.5, 0.5, 0, 0, 0, 0, 0, 0],

                [-1],

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],  # 19

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],  # 20

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],  # 21

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],  # 22

                [1, 0, 0, 0, 0, 0, 0, 0],
                [0.5, 0.5, 0, 0, 0, 0, 0, 0],
                [0.5, 0.5, 0, 0, 0, 0, 0, 0],

                [-1],

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],  # 23

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [0.5, 0.5, 0, 0, 0, 0, 0, 0],

                [-1],

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],  # 24

                [0.5, 0.5, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],

                [0.5, 0.5, 0, 0, 0, 0, 0, 0],
                [0.5, 0.5, 0.5, 0, 0, 0, 0, 0],
                [0.5, 0.5, 0, 0, 0, 0, 0, 0],

                [-1],  # 25

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],  # 26

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],  # 27

                [0.5, 0.5, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [0.5, 0.5, 0, 0, 0, 0, 0, 0],

                [-1],

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],  # 28

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],  # 29

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],  # 30

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [0.5, 0.5, 0.5, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],  # 31

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],  # 32

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],  # 33

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],  # 34

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],  # 35

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],

                [0.5, 0.5, 0.5, 0, 0, 0, 0, 0],
                [0.5, 0.5, 0.5, 0.5, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],  # 36

                [1, 0, 0, 0, 0, 0, 0, 0],
                [0.5, 0.5, 0.5, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],  # 37

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],  # 38

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],  # 39

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],  # 40

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],  # 41

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],  # 42

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],  # 43

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],  # 44

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],  # 45

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],  # 46

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],  # 47

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],  # 48

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [0.5, 0.5, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],  # 49

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],  # 50

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [0.5, 0.5, 0.5, 0.5, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],  # 51

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],  # 52

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],  # 53

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],  # 54

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],  # 55

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],

                [0.5, 0.5, 0, 0, 0, 0, 0, 0],
                [0.5, 0.5, 0, 0, 0, 0, 0, 0],
                [0.5, 0.5, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],  # 56

                [0.5, 0.5, 0.5, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],

                [0.5, 0.5, 0.5, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],  # 57

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],  # 58

                [1, 0, 0, 0, 0, 0, 0, 0],
                [0.5, 0.5, 0.5, 0, 0, 0, 0, 0],
                [0.5, 0.5, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],  # 59

                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],

                [-1],

                [1, 0, 0, 0, 0, 0, 0, 0],
                [0.5, 0.5, 0, 0, 0, 0, 0, 0],
                [1, 0, 0, 0, 0, 0, 0, 0],
                [0.5, 0.5, 0, 0, 0, 0, 0, 0],

                [-1]
            ]
            CutUp.box_extraction(final, 'C:\\Users\\alexf\\Desktop\\reine\\cropped_imgs\\')
            return PostProcess.post_process(the_moves, the_confs)
        except IndexError and TypeError:  # occurs when not enough contours are found, TypeError is just for testing
            return 'We couldn\'t read your handwriting! Make sure the grid-lines are clearly visible.', 'error', ''

    # Return result
    message, game_res, moves = get_result(data)
    # message, game_res, moves = 'It worked', '*', data  # to be updated
    return message + 'delimiter' + game_res + 'delimiter' + moves


if __name__ == '__main__':
    # run!
    app.run()
